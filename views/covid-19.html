<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Trivial Chat</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="fonts/icomoon/style.css" />
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="style.css" />

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-wEmeIV1mKuiNpC+IOBjI7aAzPcEZeedi5yW5f2yOq55WWLwNGmvvx4Um1vskeMj0"
      crossorigin="anonymous"
    />

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-p34f1UUtsS3wqzfto5wAAmdvj+osOnFyQFpp4Ua3gs/ZVWx6oOypYoCJhGGScy+8"
      crossorigin="anonymous"
    ></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <style>
      body {
        background-color: #cceaff;
      }
    </style>
  </head>

  <body>
    <img class="logo" src="logo.png" />
    <div class="site-mobile-menu site-navbar-target">
      <div class="site-mobile-menu-header">
        <div class="site-mobile-menu-close mt-3">
          <span class="icon-close2 js-menu-toggle"></span>
        </div>
      </div>
      <div class="site-mobile-menu-body"></div>
    </div>

    <header class="site-navbar site-navbar-target py-4" role="banner">
      <div class="container">
        <div class="row align-items-center position-relative">
          <!--<div class="col-3 ml-auto text-center order-2">
              <div class="site-logo">
                <a href="index.html" class="font-weight-bold text-black">TRIVIA CHAT</a>
              </div>
            </div>-->
          <div class="col-9 order-1 text-left mr-auto">
            <span class="d-inline-block d-lg-block"
              ><a
                href="#"
                class="text-light site-menu-toggle js-menu-toggle py-5"
                ><span class="icon-menu h3 text-dark"></span></a
            ></span>
            <nav
              class="site-navigation text-right ml-auto d-none d-lg-none"
              role="navigation"
            >
              <ul class="site-menu main-menu js-clone-nav ml-auto">
                <li><a href="./messages.html" class="nav-link">Messages</a></li>
                <li><a href="./news.html" class="nav-link">News</a></li>
                <li class="active">
                  <a href="./covid-19.html#" class="nav-link">Covid-19</a>
                </li>
                <li><a href="./jobs.html#" class="nav-link">Jobs</a></li>
                <li>
                  <a href="./facilities.html#" class="nav-link">Facilities</a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </div>
    </header>
    <!--<div class="hero" style="background-image: url('images/hero_1.jpg');"></div>-->

    <main>
      <div class="container">
        <h4 class="pb-2">PEOPLE DIAGNOSED WITH COVID-19</h4>

        <!---------------FORM BUTTON STARTS HERE--------------------->

        <button
          type="button"
          class="btn btn-info btn-lg float-end mb-3"
          data-toggle="modal"
          data-target="#myModal"
        >
          Fill Up Your Form
        </button>

        <!-- Modal -->
        <div id="myModal" class="modal fade" role="dialog">
          <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
              <div class="modal-header">
                <h4 class="modal-title">Form</h4>
              </div>
              <div id="patient-modal" class="modal-body">
                <form id="patientForm" class="form-horizontal">
                  <div id="message"></div>
                  <div class="form-group">
                    <label class="control-label col-sm-2 fs-5" for="name"
                      >Name</label
                    >
                    <div class="col-sm-10">
                      <input
                        type="name"
                        name="name"
                        class="form-control"
                        id="patientName"
                        placeholder="Enter Your Name"
                      />
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="inputAge" class="control-label col-sm-5 fs-5"
                      >Enter Your Age</label
                    >
                    <div class="col-sm-10">
                      <input
                        type="number"
                        class="form-control"
                        name="age"
                        id="patinetAge"
                        placeholder="Enter Your Age"
                      />
                    </div>
                  </div>
                  <div class="form-group">
                    <label
                      for="inputAddress"
                      class="control-label col-sm-2 fs-5"
                      >Address</label
                    >
                    <div class="col-sm-10">
                      <input
                        type="text"
                        name="address"
                        class="form-control"
                        id="patientAddress"
                        placeholder="Enter Your Address"
                      />
                    </div>
                  </div>
                  <button
                    type="button"
                    class="btn btn-secondary"
                    data-dismiss="modal"
                  >
                    Close
                  </button>
                  <button type="submit" class="btn btn-success">Submit</button>
                </form>
              </div>
            </div>
          </div>
        </div>

        <!---------------FORM BUTTON ENDS HERE------------------------>

        <input
          class="form-control my-2"
          id="myInput1"
          type="text"
          placeholder="Search..."
          style="width: 200px"
        />
        <table class="table table-hover table-bordered">
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">Name</th>
              <th scope="col">Age</th>
              <th scope="col">Address</th>
            </tr>
          </thead>
          <tbody id="myTable1"></tbody>
        </table>

        <h4 class="pt-5 pb-2">NEEDS OF COVID PATIENTS UNDER QUARANTINE</h4>

        <!---------------FORM BUTTON STARTS HERE--------------------->

        <button
          type="button"
          class="btn btn-info btn-lg float-end mb-3"
          data-toggle="modal"
          data-target="#myModal2"
        >
          Fill Up Your Form
        </button>

        <!-- Modal -->
        <div id="myModal2" class="modal fade" role="dialog">
          <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
              <div class="modal-header">
                <h4 class="modal-title">Form</h4>
              </div>
              <div class="modal-body">
                <form id="quarantinePatientForm" class="form-horizontal">
                  <div id="qurantine-message"></div>
                  <div class="form-group">
                    <label class="control-label col-sm-2 fs-5" for="name"
                      >Name</label
                    >
                    <div class="col-sm-10">
                      <input
                        type="text"
                        class="form-control"
                        id="quarantinePatientName"
                        placeholder="Enter Your Name"
                      />
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="inputAge" class="control-label col-sm-5 fs-5"
                      >Requirements</label
                    >
                    <div class="col-sm-10">
                      <input
                        type="text"
                        class="form-control"
                        id="quarantinePatientRequirnments"
                        placeholder="Enter Your Requirements"
                      />
                    </div>
                  </div>
                  <div class="form-group">
                    <label
                      for="inputAddress"
                      class="control-label col-sm-2 fs-5"
                      >Address</label
                    >
                    <div class="col-sm-10">
                      <input
                        type="text"
                        class="form-control"
                        id="quarantinePatientAddress"
                        placeholder="Enter Your Address"
                      />
                    </div>
                  </div>
                  <div class="modal-footer">
                    <button
                      type="button"
                      class="btn btn-secondary"
                      data-dismiss="modal"
                    >
                      Close
                    </button>
                    <button type="submit" class="btn btn-success">
                      Submit
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>

        <!---------------FORM BUTTON ENDS HERE--------------------->

        <input
          class="form-control my-2"
          id="myInput2"
          type="text"
          placeholder="Search..."
          style="width: 200px"
        />
        <table class="table table-hover table-bordered">
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">Name</th>
              <th scope="col">Requirements</th>
              <th scope="col">Address</th>
            </tr>
          </thead>
          <tbody id="myTable2"></tbody>
        </table>
      </div>
    </main>

    <footer>
      <nav class="navbar fixed-bottom navbar-dark bg-dark">
        <div class="container">
          <span class="navbar-text">
            A platform to reach out to your neighbours and connect with them. We
            aim to grow together as one community
          </span>
        </div>
      </nav>
    </footer>

    <script>
      $(document).ready(function () {
        $("#myInput1").on("keyup", function () {
          var value = $(this).val().toLowerCase();
          $("#myTable1 tr").filter(function () {
            $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1);
          });
        });
      });
    </script>

    <script>
      $(document).ready(function () {
        $("#myInput2").on("keyup", function () {
          var value = $(this).val().toLowerCase();
          $("#myTable2 tr").filter(function () {
            $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1);
          });
        });
      });
    </script>

    <script>
      const patientForm = document.getElementById("patientForm");
      const patientName = document.getElementById("patientName");
      const patinetAge = document.getElementById("patinetAge");
      const patientAddress = document.getElementById("patientAddress");
      const patientTable = document.getElementById("myTable1");
      const quarantineForm = document.getElementById("quarantinePatientForm");
      const quarantinePatientName = document.getElementById(
        "quarantinePatientName"
      );
      const quarantineAge = document.getElementById(
        "quarantinePatientRequirnments"
      );
      const quarantinePatientAddress = document.getElementById(
        "quarantinePatientAddress"
      );
      const quarantineTable = document.getElementById("myTable2");

      document.addEventListener("DOMContentLoaded", function () {
        fetch("/patient")
          .then((res) => res.json())
          .then((data) => {
            let output = "";
            data.map(({ name, age, address }, idx) => {
              output += `
            <tr>
              <th scope="row">${idx + 1}</th>
              <td>${name}</td>
              <td>${age}</td>
              <td>${address}</td>
            </tr>
                  `;
            });
            patientTable.innerHTML = output;
          })
          .catch((err) => console.log(err));

        fetch("/quarantine")
          .then((res) => res.json())
          .then((data) => {
            let output = "";
            data.map(({ name, requirenment, address }, idx) => {
              output += `
            <tr>
              <th scope="row">${idx + 1}</th>
              <td>${name}</td>
              <td>${requirenment}</td>
              <td>${address}</td>
            </tr>
                  `;
            });
            quarantineTable.innerHTML = output;
          })
          .catch((err) => console.log(err));
      });

      quarantineForm.addEventListener("submit", function (e) {
        e.preventDefault();
        fetch("/quarantine", {
          method: "POST",
          headers: {
            Accept: "application/json plain/text */*",
            "content-type": "application/json",
          },
          body: JSON.stringify({
            name: quarantinePatientName.value,
            requirenment: quarantinePatientRequirnments.value,
            address: quarantinePatientAddress.value,
          }),
        })
          .then((res) => res.json())
          .then((data) => {
            const patientMessage = document.getElementById("qurantine-message");
            const myAlert = document.createElement("div");
            const closeBtn = document.createElement("button");
            myAlert.classList.add("alert");
            myAlert.classList.add("alert-dismissible");
            myAlert.classList.add("fade");
            myAlert.classList.add("show");
            closeBtn.setAttribute("data-dismiss", "alert");
            closeBtn.classList.add("close");
            if (data.msg === "ok") {
              myAlert.classList.add("alert-success");
              myAlert.innerHTML = "patient is created sucessfully";
            } else {
              myAlert.classList.add("alert-warning");
              myAlert.innerHTML = data.msg;
            }
            closeBtn.innerHTML = "&times;";
            myAlert.appendChild(closeBtn);
            patientMessage.appendChild(myAlert);
            setTimeout(() => {
              patientMessage.removeChild(myAlert);
            }, 5000);
          })
          .catch((err) => console.log(err));
      });

      patientForm.addEventListener("submit", function (e) {
        e.preventDefault();
        fetch("/patient", {
          method: "POST",
          headers: {
            Accept: "application/json plain/text */*",
            "content-type": "application/json",
          },
          body: JSON.stringify({
            name: patientName.value,
            age: patinetAge.value,
            address: patientAddress.value,
          }),
        })
          .then((res) => res.json())
          .then((data) => {
            const patientMessage = document.getElementById("message");
            const myAlert = document.createElement("div");
            const closeBtn = document.createElement("button");
            myAlert.classList.add("alert");
            myAlert.classList.add("alert-dismissible");
            myAlert.classList.add("fade");
            myAlert.classList.add("show");
            closeBtn.setAttribute("data-dismiss", "alert");
            closeBtn.classList.add("close");
            if (data.msg === "ok") {
              myAlert.classList.add("alert-success");
              myAlert.innerHTML = "patient is created sucessfully";
            } else {
              myAlert.classList.add("alert-warning");
              myAlert.innerHTML = data.msg;
            }
            closeBtn.innerHTML = "&times;";
            myAlert.appendChild(closeBtn);
            patientMessage.appendChild(myAlert);
            setTimeout(() => {
              patientMessage.removeChild(myAlert);
            }, 5000);
          })
          .catch((err) => console.log(err));
      });
    </script>

    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.sticky.js"></script>
    <script src="js/main.js"></script>
  </body>
</html>
